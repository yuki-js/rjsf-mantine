"use strict";(self.webpackChunk_rjsf_docs=self.webpackChunk_rjsf_docs||[]).push([[1133],{876:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>u});var a=n(2784);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=p(n),h=i,u=d["".concat(l,".").concat(h)]||d[h]||c[h]||r;return n?a.createElement(u,o(o({ref:t},m),{},{components:n})):a.createElement(u,o({ref:t},m))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2346:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(7896),i=(n(2784),n(876));const r={},o="5.x Upgrade Guide",s={unversionedId:"migration-guides/v5.x upgrade guide",id:"migration-guides/v5.x upgrade guide",title:"5.x Upgrade Guide",description:"Breaking changes",source:"@site/docs/migration-guides/v5.x upgrade guide.md",sourceDirName:"migration-guides",slug:"/migration-guides/v5.x upgrade guide",permalink:"/react-jsonschema-form/docs/migration-guides/v5.x upgrade guide",draft:!1,editUrl:"https://github.com/rjsf-team/react-jsonschema-form/tree/main/packages/docs/docs/migration-guides/v5.x upgrade guide.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"4.x Upgrade Guide",permalink:"/react-jsonschema-form/docs/migration-guides/v4.x upgrade guide"},next:{title:"Usage and Customization",permalink:"/react-jsonschema-form/docs/usage/"}},l={},p=[{value:"Breaking changes",id:"breaking-changes",level:2},{value:"Node support",id:"node-support",level:3},{value:"React version",id:"react-version",level:3},{value:"New packages",id:"new-packages",level:3},{value:"<code>id</code> BREAKING CHANGES",id:"id-breaking-changes",level:3},{value:"<code>enumOptions[]</code> widgets BREAKING CHANGES",id:"enumoptions-widgets-breaking-changes",level:3},{value:"<code>@rjsf/core</code> BREAKING CHANGES",id:"rjsfcore-breaking-changes",level:3},{value:"Types",id:"types",level:4},{value:"Form props",id:"form-props",level:4},{value:"<code>formElement</code> converted to RefObject",id:"formelement-converted-to-refobject",level:5},{value:"<code>validate</code> prop renamed",id:"validate-prop-renamed",level:5},{value:"<code>fields</code> prop changes",id:"fields-prop-changes",level:5},{value:"new <code>templates</code> prop",id:"new-templates-prop",level:5},{value:"<code>widgets</code> prop change",id:"widgets-prop-change",level:5},{value:"utils.js",id:"utilsjs",level:4},{value:"validator.js",id:"validatorjs",level:4},{value:"toErrorList param changed",id:"toerrorlist-param-changed",level:5},{value:"Custom validation and extraErrors",id:"custom-validation-and-extraerrors",level:5},{value:"Generate correct ids when arrays are combined with <code>anyOf</code>/<code>oneOf</code>",id:"generate-correct-ids-when-arrays-are-combined-with-anyofoneof",level:4},{value:"Deprecations added in v5",id:"deprecations-added-in-v5",level:4},{value:"getMatchingOption()",id:"getmatchingoption",level:5},{value:"Non-standard <code>enumNames</code> property",id:"non-standard-enumnames-property",level:5},{value:"uiSchema.classNames",id:"uischemaclassnames",level:5},{value:"<code>@rjsf/material-ui</code> BREAKING CHANGES",id:"rjsfmaterial-ui-breaking-changes",level:3},{value:"Migrating for Material UI version 4",id:"migrating-for-material-ui-version-4",level:4},{value:"Migrating for Material UI version 5",id:"migrating-for-material-ui-version-5",level:4},{value:"Before",id:"before",level:5},{value:"After",id:"after",level:5}],m={toc:p},d="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"5x-upgrade-guide"},"5.x Upgrade Guide"),(0,i.kt)("h2",{id:"breaking-changes"},"Breaking changes"),(0,i.kt)("p",null,"There were several significant ",(0,i.kt)("strong",{parentName:"p"},"breaking changes")," in RJSF version 5 that were necessary in order to support the following new features:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Schema validation was decoupled from ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/core")," to resolve issue ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/2693"},"#2693"),". Additionally, in order to break a circular dependency in the validation refactor, the ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/core/utils.js")," file was split out into its own ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/utils")," package as was suggested in ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/1655"},"#1655"),"."),(0,i.kt)("li",{parentName:"ul"},"The theme for Material UI version 5 (i.e. ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/mui"),") was split out of the theme for version 4 (i.e. ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/material-ui"),") to resolve the following issues: ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/2762"},"#2762"),", ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/2858"},"#2858"),", ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/2905"},"#2905"),", ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/2945"},"#2945")),(0,i.kt)("li",{parentName:"ul"},"As part of the fix for ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/2526"},"#2526")," all the existing templates in the previous version were moved into a new ",(0,i.kt)("inlineCode",{parentName:"li"},"templates")," dictionary, similar to how ",(0,i.kt)("inlineCode",{parentName:"li"},"widgets")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"fields")," work. This ",(0,i.kt)("inlineCode",{parentName:"li"},"templates")," dictionary was added to the ",(0,i.kt)("inlineCode",{parentName:"li"},"Registry")," and also the ",(0,i.kt)("inlineCode",{parentName:"li"},"Form")," props, replacing the ",(0,i.kt)("inlineCode",{parentName:"li"},"ArrayFieldTemplate"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"FieldTemplate"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"ObjectFieldTemplate")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"ErrorList")," props. In addition, several of the ",(0,i.kt)("inlineCode",{parentName:"li"},"fields")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"widgets")," based components were moved into the ",(0,i.kt)("inlineCode",{parentName:"li"},"templates")," dictionary as they were more like templates than true ",(0,i.kt)("inlineCode",{parentName:"li"},"Field"),"s or ",(0,i.kt)("inlineCode",{parentName:"li"},"Widget"),"s. Also fixes ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/2945"},"#2945")),(0,i.kt)("li",{parentName:"ul"},"Fixed ",(0,i.kt)("inlineCode",{parentName:"li"},"anyOf")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"oneOf")," getting incorrect, potentially duplicate ids when combined with array ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/2197"},"#2197")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"CheckboxesWidget"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"RadioWidget")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"SelectWidget")," in all themes now use indexes into ",(0,i.kt)("inlineCode",{parentName:"li"},"enumOptions[]")," rather than ",(0,i.kt)("inlineCode",{parentName:"li"},"option.value")," to allow for objects in ",(0,i.kt)("inlineCode",{parentName:"li"},"enumOptions")," - ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/1494"},"#1494"))),(0,i.kt)("h3",{id:"node-support"},"Node support"),(0,i.kt)("p",null,"Version 5 is dropping official support for Node 12 as it is no longer a ",(0,i.kt)("a",{parentName:"p",href:"https://nodejs.org/en/about/releases/"},"maintained version"),".\nPlease use Node 18 when making any changes to ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"package-lock.json")," files.\nAll PR and branch builds are running against Node 14, 16 and 18."),(0,i.kt)("h3",{id:"react-version"},"React version"),(0,i.kt)("p",null,"RJSF is no longer actively supporting React version < 16.14.x.\nReact 17 is officially supported on all the themes where the underlying theme library also supports React 17."),(0,i.kt)("p",null,"Unfortunately, there is required work pending to properly support React 18, so use it at your own risk."),(0,i.kt)("h3",{id:"new-packages"},"New packages"),(0,i.kt)("p",null,"There are four new packages added in RJSF version 5:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/utils"),": All of the ",(0,i.kt)("a",{parentName:"li",href:"/react-jsonschema-form/docs/api-reference/utility-functions"},"utility functions")," previously imported from ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/core/utils")," as well as the Typescript types for RJSF version 5.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The following new utility functions were added: ",(0,i.kt)("inlineCode",{parentName:"li"},"ariaDescribedByIds()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"createSchemaUtils()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"descriptionId()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"enumOptionsDeselectValue()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"enumOptionsIndexForValue()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"enumOptionsIsSelected()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"enumOptionsSelectValue()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"enumOptionsValueForIndex()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"errorId()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"examplesId()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"getClosestMatchingOption()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"getFirstMatchingOption()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"getInputProps()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"helpId()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"mergeValidationData()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"optionId()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"sanitizeDataForNewSchema()")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"titleId()")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/validator-ajv6"),": The ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/ajv-validator/ajv"},"ajv"),"-v6-based validator refactored out of ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/core@4.x"),", that implements the ",(0,i.kt)("inlineCode",{parentName:"li"},"ValidatorType")," interface defined in ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/utils"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/validator-ajv8"),": The ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/ajv-validator/ajv"},"ajv"),"-v8-based validator that is an upgrade of the ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/validator-ajv6"),", that implements the ",(0,i.kt)("inlineCode",{parentName:"li"},"ValidatorType")," interface defined in ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/utils"),". See the ajv 6 to 8 ",(0,i.kt)("a",{parentName:"li",href:"https://ajv.js.org/v6-to-v8-migration.html"},"migration guide")," for more information."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/mui"),": Previously ",(0,i.kt)("inlineCode",{parentName:"li"},"@rjsf/material-ui/v5"),", now provided as its own theme.")),(0,i.kt)("h3",{id:"id-breaking-changes"},(0,i.kt)("inlineCode",{parentName:"h3"},"id")," BREAKING CHANGES"),(0,i.kt)("p",null,"In many of the themes the ",(0,i.kt)("inlineCode",{parentName:"p"},"id"),"s for the ",(0,i.kt)("inlineCode",{parentName:"p"},"Title"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Description")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Examples")," blocks were update to all have a consistent value of ",(0,i.kt)("inlineCode",{parentName:"p"},"xxx__title"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"xxx__description")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"xxx__examples"),", respectively, where ",(0,i.kt)("inlineCode",{parentName:"p"},"xxx")," is the id of the field.\nIn addition, some of the ",(0,i.kt)("inlineCode",{parentName:"p"},"id"),"s for various input values were updated to be consistent across themes or to fix small bugs.\nFor instance, the values for radio buttons in the ",(0,i.kt)("inlineCode",{parentName:"p"},"RadioWidget")," and checkboxes in the ",(0,i.kt)("inlineCode",{parentName:"p"},"CheckboxesWidget")," are of the form ",(0,i.kt)("inlineCode",{parentName:"p"},"xxx-${option.value}"),", where ",(0,i.kt)("inlineCode",{parentName:"p"},"xxx")," is the id of the field."),(0,i.kt)("h3",{id:"enumoptions-widgets-breaking-changes"},(0,i.kt)("inlineCode",{parentName:"h3"},"enumOptions[]")," widgets BREAKING CHANGES"),(0,i.kt)("p",null,"Schemas may have ",(0,i.kt)("inlineCode",{parentName:"p"},"enumOptions[]")," where values are objects rather than primitive types. Examples of such schemas have been added to the playground. These schemas did not work in RJSF prior to v5.\nIn every theme, the ",(0,i.kt)("inlineCode",{parentName:"p"},"enumOptions[]")," rendering widgets ",(0,i.kt)("inlineCode",{parentName:"p"},"CheckboxesWidget"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"RadioWidget")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"SelectWidget")," previously used the ",(0,i.kt)("inlineCode",{parentName:"p"},"enumOptions[].value")," to as the value used for the underlying ",(0,i.kt)("inlineCode",{parentName:"p"},"checkbox"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"radio")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"select.option")," elements.\nNow, these ",(0,i.kt)("inlineCode",{parentName:"p"},"CheckboxesWidget"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"RadioWidget")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"SelectWidget")," components use the index of the ",(0,i.kt)("inlineCode",{parentName:"p"},"enumOptions[]")," in the list as the value for the underlying elements.\nIf you need to build a custom widget for this kind of ",(0,i.kt)("inlineCode",{parentName:"p"},"enumOptions"),", there are a set of ",(0,i.kt)("inlineCode",{parentName:"p"},"enumOptionsXXX")," functions in ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/utils")," to support your implementation."),(0,i.kt)("h3",{id:"rjsfcore-breaking-changes"},(0,i.kt)("inlineCode",{parentName:"h3"},"@rjsf/core")," BREAKING CHANGES"),(0,i.kt)("h4",{id:"types"},"Types"),(0,i.kt)("p",null,"In version 4, RJSF exported all its types directly from ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/core"),".\nIn version 5, only the types for the ",(0,i.kt)("inlineCode",{parentName:"p"},"Form")," component and the ",(0,i.kt)("inlineCode",{parentName:"p"},"withTheme()")," HOC are exported directly from ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/core"),".\nAll the rest of the types for RJSF are now exported from the new ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/utils")," package."),(0,i.kt)("p",null,"NOTE: The types in ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/utils")," have been improved significantly from those in version 4 and as a result may require you to fix your Typescript typings and add some casts."),(0,i.kt)("p",null,"Some of the most notable changes are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"RJSFSchema")," has replaced the use of ",(0,i.kt)("inlineCode",{parentName:"p"},"JSON7Schema")," for future compatibility reasons."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Currently ",(0,i.kt)("inlineCode",{parentName:"li"},"RJSFSchema")," is simply an alias to ",(0,i.kt)("inlineCode",{parentName:"li"},"JSON7Schema")," so this change is purely a naming one."),(0,i.kt)("li",{parentName:"ul"},"It is highly recommended to update your use of ",(0,i.kt)("inlineCode",{parentName:"li"},"JSON7Schema")," with ",(0,i.kt)("inlineCode",{parentName:"li"},"RJSFSchema")," so that when the RJSF begins supporting a newer JSON Schema version out-of-the-box, your code won't be affected."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"RJSFSchemaDefinition")," has replaced the use of ",(0,i.kt)("inlineCode",{parentName:"p"},"JSONSchema7Definition")," for the same reasons.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The use of the generic ",(0,i.kt)("inlineCode",{parentName:"p"},"T")," (defaulting to ",(0,i.kt)("inlineCode",{parentName:"p"},"any"),") for the ",(0,i.kt)("inlineCode",{parentName:"p"},"formData")," type has been expanded to cover all type hierarchies that use ",(0,i.kt)("inlineCode",{parentName:"p"},"formData"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"StrictRJSFSchema")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"RJSFSchema")," have replaced the use of ",(0,i.kt)("inlineCode",{parentName:"p"},"JSON7Schema")," for future compatibility reasons."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"RJSFSchema")," is ",(0,i.kt)("inlineCode",{parentName:"li"},"StrictRJSFSchema")," joined with the ",(0,i.kt)("inlineCode",{parentName:"li"},"GenericObjectType")," (i.e. ",(0,i.kt)("inlineCode",{parentName:"li"},"{ [key: string]: any }"),") to allow for additional syntax related to newer draft versions"),(0,i.kt)("li",{parentName:"ul"},"All definitions of ",(0,i.kt)("inlineCode",{parentName:"li"},"schema")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"rootSchema")," elements have been replaced with a generic that is defined as ",(0,i.kt)("inlineCode",{parentName:"li"},"S extends StrictRJSFSchema = RJSFSchema")),(0,i.kt)("li",{parentName:"ul"},"It is highly recommended to update your use of ",(0,i.kt)("inlineCode",{parentName:"li"},"JSON7Schema")," with ",(0,i.kt)("inlineCode",{parentName:"li"},"RJSFSchema")," since that is the default for the new generic used for ",(0,i.kt)("inlineCode",{parentName:"li"},"schema")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"rootSchema")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"A new generic ",(0,i.kt)("inlineCode",{parentName:"p"},"F")," (extending ",(0,i.kt)("inlineCode",{parentName:"p"},"FormContextType")," defaulting to ",(0,i.kt)("inlineCode",{parentName:"p"},"any"),") was added for the ",(0,i.kt)("inlineCode",{parentName:"p"},"formContext")," type, and all types in the hierarchy that use ",(0,i.kt)("inlineCode",{parentName:"p"},"formContext")," have had that generic added to them.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The new ",(0,i.kt)("inlineCode",{parentName:"p"},"CustomValidator"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"ErrorTransformer"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"ValidationData"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"ValidatorType")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"SchemaUtilsType")," types were added to support the decoupling of the validation implementation.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The new ",(0,i.kt)("inlineCode",{parentName:"p"},"TemplatesType"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"ArrayFieldDescriptionProps"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"ArrayFieldTitleProps"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"UnsupportedFieldProps"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"IconButtonProps"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"SubmitButtonProps")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"UIOptionsBaseType")," were added to support the consolidation (and expansion) of ",(0,i.kt)("inlineCode",{parentName:"p"},"templates")," in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Registry")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Form"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"BREAKING CHANGE")," The ",(0,i.kt)("inlineCode",{parentName:"p"},"DescriptionField")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"TitleField")," props were removed from the ",(0,i.kt)("inlineCode",{parentName:"p"},"ArrayFieldTemplateProps")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ObjectFieldTemplateProps")," as they can now be derived from the ",(0,i.kt)("inlineCode",{parentName:"p"},"templates")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"uiSchema")," via the new ",(0,i.kt)("inlineCode",{parentName:"p"},"getTemplate()")," utility function.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"BREAKING CHANGE")," The ",(0,i.kt)("inlineCode",{parentName:"p"},"fields")," prop was removed from the ",(0,i.kt)("inlineCode",{parentName:"p"},"FieldTemplateProps")," as you can simply use ",(0,i.kt)("inlineCode",{parentName:"p"},"registry.fields")," instead.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"BREAKING CHANGE")," The ",(0,i.kt)("inlineCode",{parentName:"p"},"showErrorList")," prop was changed to accept ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", ",(0,i.kt)("inlineCode",{parentName:"p"},'"top"')," or ",(0,i.kt)("inlineCode",{parentName:"p"},'"bottom"'),". ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," is no longer a valid value. The default value is ",(0,i.kt)("inlineCode",{parentName:"p"},'"top"'),", which has identical behavior to the default value/",(0,i.kt)("inlineCode",{parentName:"p"},"true")," in v4.\nYou can view all these ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/rjsf-team/react-jsonschema-form/blob/main/packages/utils/src/types.ts"},"types")," on GitHub."))),(0,i.kt)("h4",{id:"form-props"},"Form props"),(0,i.kt)("p",null,"In version 5, the ",(0,i.kt)("inlineCode",{parentName:"p"},"Form")," component's two optional props ",(0,i.kt)("inlineCode",{parentName:"p"},"additionalMetaSchemas")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"customFormats")," were replaced with the new, required ",(0,i.kt)("inlineCode",{parentName:"p"},"validator")," prop, in order to support the decoupling of the validation implementation.\nThis new ",(0,i.kt)("inlineCode",{parentName:"p"},"validator")," prop is expected to be an implementation of the ",(0,i.kt)("inlineCode",{parentName:"p"},"ValidatorType")," interface.\nThe new ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/validator-ajv6")," package contains the refactored implementation of the version 4 validator; It was provided for backwards compatibility with RJSF v4, and it is deprecated.",(0,i.kt)("br",{parentName:"p"}),"\n","The new ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/validator-ajv8")," package contains the refactored implementation of the version 4 validator, that has been converted to use the ",(0,i.kt)("inlineCode",{parentName:"p"},"Ajv 8")," validator and has more capabilities than the ",(0,i.kt)("inlineCode",{parentName:"p"},"Ajv 6")," one. See the ",(0,i.kt)("a",{parentName:"p",href:"https://ajv.js.org/v6-to-v8-migration.html"},"Ajv migration guide")," for more information."),(0,i.kt)("p",null,"There are two ways to use this new package to provide a ",(0,i.kt)("inlineCode",{parentName:"p"},"validator")," for a ",(0,i.kt)("inlineCode",{parentName:"p"},"Form"),".\nFirst, you can simply import the default validator from the package and pass it to a ",(0,i.kt)("inlineCode",{parentName:"p"},"Form"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},'import { RJSFSchema } from "@rjsf/utils";\nimport Form from "@rjsf/core";\nimport validator from "@rjsf/validator-ajv8";\n\n// Your schema\nconst schema: RJSFSchema = { ... };\n\nrender((\n  <Form schema={schema} validator={validator} />\n), document.getElementById("app"));\n')),(0,i.kt)("p",null,"Second, if you were actually providing one (or both) of the removed optional props to your ",(0,i.kt)("inlineCode",{parentName:"p"},"Form"),", you can continue using them by creating a customized validator."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},'import { RJSFSchema } from "@rjsf/utils";\nimport Form from "@rjsf/core";\nimport { customizeValidator, CustomValidatorOptionsType } from "@rjsf/validator-ajv8";\n\n// Your schema, additionalMetaSchemas and/or customFormats\nconst schema: RJSFSchema = { ... };\nconst additionalMetaSchemas: CustomValidatorOptionsType[\'additionalMetaSchemas\'] = [{ ... }];\nconst customFormats: CustomValidatorOptionsType[\'customFormats\'] = { ... };\n\nconst validator = customizeValidator({ additionalMetaSchemas, customFormats });\n\nrender((\n  <Form schema={schema} validator={validator} />\n), document.getElementById("app"));\n')),(0,i.kt)("h5",{id:"formelement-converted-to-refobject"},(0,i.kt)("inlineCode",{parentName:"h5"},"formElement")," converted to RefObject"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"formElement")," variable that stored the ref to the inner ",(0,i.kt)("inlineCode",{parentName:"p"},"<form />")," was converted from a simple variable assigned via a ",(0,i.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"},"callback ref")," (ala React < 16.3) to a React.RefObject created using the ",(0,i.kt)("inlineCode",{parentName:"p"},"React.createRef()")," API.\nAs a result, if you were using the ",(0,i.kt)("inlineCode",{parentName:"p"},"formElement")," ref, you will need to update it to use ",(0,i.kt)("inlineCode",{parentName:"p"},"formElement.current"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},'import { RJSFSchema } from "@rjsf/utils";\nimport Form from "@rjsf/core";\nimport validator from "@rjsf/validator-ajv8";\n\n// Your schema\nconst schema: RJSFSchema = { ... };\n\nconst formRef = React.createRef();\n\nrender((\n  <Form ref={formRef} schema={schema} validator={validator} />\n), document.getElementById("app"));\n\n...\n// Previously, to reset the form one would have called:\n//   formRef.current.formElement.reset();\n// Now one calls:\nformRef.current.formElement.current.reset();\n')),(0,i.kt)("h5",{id:"validate-prop-renamed"},(0,i.kt)("inlineCode",{parentName:"h5"},"validate")," prop renamed"),(0,i.kt)("p",null,"Additionally, in version 5, the ",(0,i.kt)("inlineCode",{parentName:"p"},"validate")," prop on ",(0,i.kt)("inlineCode",{parentName:"p"},"Form")," was renamed to ",(0,i.kt)("inlineCode",{parentName:"p"},"customValidate")," to avoid confusion with the new ",(0,i.kt)("inlineCode",{parentName:"p"},"validator")," prop."),(0,i.kt)("h5",{id:"fields-prop-changes"},(0,i.kt)("inlineCode",{parentName:"h5"},"fields")," prop changes"),(0,i.kt)("p",null,"In previous versions, it was possible to provide an override to the ",(0,i.kt)("inlineCode",{parentName:"p"},"DescriptionField"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"TitleField")," and/or ",(0,i.kt)("inlineCode",{parentName:"p"},"UnsupportedField")," components by providing a custom implementation in the ",(0,i.kt)("inlineCode",{parentName:"p"},"fields")," prop on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Form"),".\nSince these components do not actually support the ",(0,i.kt)("inlineCode",{parentName:"p"},"FieldProps")," interface, they were moved into the ",(0,i.kt)("inlineCode",{parentName:"p"},"templates")," dictionary instead.\nIf you were previously overriding any (or all) of these components, you can override them now via the ",(0,i.kt)("inlineCode",{parentName:"p"},"templates")," prop on ",(0,i.kt)("inlineCode",{parentName:"p"},"Form")," instead:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},'import { DescriptionFieldProps, RJSFSchema, TitleFieldProps } from "@rjsf/utils";\nimport Form from "@rjsf/core";\nimport validator from "@rjsf/validator-ajv8";\n\n// Your schema\nconst schema: RJSFSchema = { ... };\n\n// Your custom fields\nconst CustomDescriptionField = (props: DescriptionFieldProps) => { ... };\nconst CustomTitleField = (props: TitleFieldProps) => { ... };\nconst CustomUnsupportedField = (props: ObjectFieldTemplateProps) => { ...\n};\n\nconst templates: Partial<TemplatesType> = {\n  DescriptionFieldTemplate: CustomDescriptionField,\n  TitleFieldTemplate: CustomTitleField,\n  UnsupportedFieldTemplate: CustomUnsupportedField,\n};\n\nrender((\n  <Form schema={schema} validator={validator} templates={templates}/>\n), document.getElementById("app"));\n')),(0,i.kt)("h5",{id:"new-templates-prop"},"new ",(0,i.kt)("inlineCode",{parentName:"h5"},"templates")," prop"),(0,i.kt)("p",null,"Additionally, in version 5, the ",(0,i.kt)("inlineCode",{parentName:"p"},"ArrayFieldTemplate"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"FieldTemplate"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"ObjectFieldTemplate")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ErrorList")," props were replaced with the ",(0,i.kt)("inlineCode",{parentName:"p"},"templates")," prop as part of the ",(0,i.kt)("inlineCode",{parentName:"p"},"TemplatesType")," consolidation.\nIf you were previously overriding any (or all) of these templates, you can simply consolidate them into the new ",(0,i.kt)("inlineCode",{parentName:"p"},"templates")," prop on ",(0,i.kt)("inlineCode",{parentName:"p"},"Form")," instead:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},'import { ArrayFieldTemplateProps, ErrorListProps, FieldTemplateProps, ObjectFieldTemplateProps, RJSFSchema } from "@rjsf/utils";\nimport Form from "@rjsf/core";\nimport validator from "@rjsf/validator-ajv8";\n\n// Your schema\nconst schema: RJSFSchema = { ... };\n\n// Your custom templates\nconst CustomArrayFieldTemplate = (props: ArrayFieldTemplateProps) => { ... };\nconst CustomFieldTemplate = (props: FieldTemplateProps) => { ... };\nconst CustomObjectFieldTemplate = (props: ObjectFieldTemplateProps) => { ... };\nconst CustomErrorField = (props: ErrorListProps) => { ... };\n\nconst templates: Partial<TemplatesType> = {\n  ArrayFieldTemplate: CustomArrayFieldTemplate,\n  FieldTemplate: CustomFieldTemplate,\n  ObjectFieldTemplate: CustomObjectFieldTemplate,\n  ErrorFieldTemplate: CustomErrorField,\n};\n\nrender((\n  <Form schema={schema} validator={validator} templates={templates} />\n), document.getElementById("app"));\n')),(0,i.kt)("p",null,"NOTE: In version 5, the ",(0,i.kt)("inlineCode",{parentName:"p"},"ArrayField")," implementation was refactored to add 3 additional templates for presenting arrays along with the ",(0,i.kt)("inlineCode",{parentName:"p"},"ArrayFieldTemplate"),".\nIf you were updating the ",(0,i.kt)("inlineCode",{parentName:"p"},"ArrayFieldTemplate")," to modify just a subset of the UI, it may be easier for you to implement one of the other new templates instead.\nSee the ",(0,i.kt)("a",{parentName:"p",href:"/react-jsonschema-form/docs/advanced-customization/custom-templates"},"Custom Templates")," documentation for more details."),(0,i.kt)("h5",{id:"widgets-prop-change"},(0,i.kt)("inlineCode",{parentName:"h5"},"widgets")," prop change"),(0,i.kt)("p",null,"In the previous version, it was possible to provide an override to the ",(0,i.kt)("inlineCode",{parentName:"p"},"SubmitButton")," component by providing a custom implementation in the ",(0,i.kt)("inlineCode",{parentName:"p"},"widgets")," prop on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Form"),".\nSince this component only requires a tiny fraction of the ",(0,i.kt)("inlineCode",{parentName:"p"},"WidgetProps")," interface, it was moved into the ",(0,i.kt)("inlineCode",{parentName:"p"},"templates.ButtonTemplates")," dictionary instead with its own, reduced set of props.\nIf you were previously overriding this component, you can override it now via the ",(0,i.kt)("inlineCode",{parentName:"p"},"templates")," prop on ",(0,i.kt)("inlineCode",{parentName:"p"},"Form")," instead:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},'import { RJSFSchema, SubmitButtonProps } from "@rjsf/utils";\nimport Form from "@rjsf/core";\nimport validator from "@rjsf/validator-ajv8";\n\n// Your schema\nconst schema: RJSFSchema = { ... };\n\n// Your custom button\nconst CustomSubmitButton = (props: SubmitButtonProps) => { ...\n};\n\nconst templates: Partial<TemplatesType> = {\n  ButtonTemplates: {\n    SubmitButton: CustomSubmitButton,\n  }\n};\n\nrender((\n  <Form schema={schema} validator={validator} templates={templates}/>\n), document.getElementById("app"));\n')),(0,i.kt)("h4",{id:"utilsjs"},"utils.js"),(0,i.kt)("p",null,"In version 5, all the utility functions that were previously accessed via ",(0,i.kt)("inlineCode",{parentName:"p"},"import { utils } from '@rjsf/core';")," are now available via ",(0,i.kt)("inlineCode",{parentName:"p"},"import utils from '@rjsf/utils';"),".\nBecause of the decoupling of validation from ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/core")," there is a breaking change for all the ",(0,i.kt)("a",{parentName:"p",href:"/react-jsonschema-form/docs/api-reference/utility-functions#validator-based-utility-functions"},"validator-based utility functions"),", since they now require an additional ",(0,i.kt)("inlineCode",{parentName:"p"},"ValidatorType")," parameter.\nMore over, one previously exported function ",(0,i.kt)("inlineCode",{parentName:"p"},"resolveSchema()")," is no longer exposed in the ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/utils"),", so use ",(0,i.kt)("inlineCode",{parentName:"p"},"retrieveSchema()")," instead.\nFinally, the function ",(0,i.kt)("inlineCode",{parentName:"p"},"getMatchingOption()")," has been deprecated in favor of ",(0,i.kt)("inlineCode",{parentName:"p"},"getFirstMatchingOption()"),"."),(0,i.kt)("p",null,"If you have built custom fields or widgets that utilized any of these breaking-change functions, don't worry, there is a quick and easy solution for you.\nThe ",(0,i.kt)("inlineCode",{parentName:"p"},"registry")," has a breaking-change which removes the previously deprecated ",(0,i.kt)("inlineCode",{parentName:"p"},"definitions")," property while adding the new ",(0,i.kt)("inlineCode",{parentName:"p"},"schemaUtils")," property.\nThis new ",(0,i.kt)("inlineCode",{parentName:"p"},"registry.schemaUtils")," property implements the ",(0,i.kt)("inlineCode",{parentName:"p"},"SchemaUtilsType")," interface, which allows you to call a version of each of these breaking-change functions without the need for passing either a ",(0,i.kt)("inlineCode",{parentName:"p"},"validator")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"rootSchema"),".\nBecause all fields and widgets are guaranteed to be passed the ",(0,i.kt)("inlineCode",{parentName:"p"},"registry")," as a prop, if your custom field/widget happens to use either the ",(0,i.kt)("inlineCode",{parentName:"p"},"registry.definitions")," object or a breaking-change validator-based utility function you make the following changes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import { RJSFSchema, FieldProps } from '@rjsf/utils';\n\nfunction YourField(props: FieldProps) {\n  const { registry } = props;\n// Change `registry.definitions` to `registry.rootSchema.definitions`\n// const { definitions } = registry; <- version 4\n  const { rootSchema } = registry;\n  const { definitions } = rootSchema;\n...\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"// Change breaking-change function to schemaUtils instead, otherwise import from @rjsf/utils\n// import { utils } from '@rjsf/core'; <- version 4\n// const { isMultiSelect, resolveSchema, getUiOptions } = utils; <- version 4\nimport { RJSFSchema, WidgetProps, getUiOptions } from '@rjsf/utils';\n\nfunction YourWidget(props: WidgetProps) {\n  const { registry, uiSchema } = props;\n  const { schemaUtils } = registry;\n// const matchingOption = getMatchingOption({}, options, rootSchema); <- version 4\n// const isMultiSelect = isMultiSelect(schema, rootSchema); <- version 4\n// const newSchema = resolveSchema(schema, formData, rootSchema); <- version 4\n  const matchingOption = schemaUtils.getFirstMatchingOption({}, options);\n  const isMultiSelect = schemaUtils.isMultiSelect(schema);\n  const newSchema: RJSFSchema = schemaUtils.retrieveSchema(schema, formData);\n  const options = getUiOptions(uiSchema);\n\n...\n}\n")),(0,i.kt)("h4",{id:"validatorjs"},"validator.js"),(0,i.kt)("p",null,"Because of the decoupling of validation from ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/core")," this file was refactored into its own ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/validator-ajv8")," package.\nDuring that refactor a few ",(0,i.kt)("strong",{parentName:"p"},"breaking changes")," were made to how it works related to custom validation and ",(0,i.kt)("inlineCode",{parentName:"p"},"ErrorSchema")," conversion."),(0,i.kt)("h5",{id:"toerrorlist-param-changed"},"toErrorList param changed"),(0,i.kt)("p",null,"In previous versions, the ",(0,i.kt)("inlineCode",{parentName:"p"},"toErrorList()")," function used to take a ",(0,i.kt)("inlineCode",{parentName:"p"},"fieldName")," string defaulted to ",(0,i.kt)("inlineCode",{parentName:"p"},"root"),", and used it to format the ",(0,i.kt)("inlineCode",{parentName:"p"},"stack")," message.\nIn version 5, ",(0,i.kt)("inlineCode",{parentName:"p"},"fieldName")," was changed to ",(0,i.kt)("inlineCode",{parentName:"p"},"fieldPath")," string array defaulted to an empty array, and is used to recursively add the field name to the errors as the ",(0,i.kt)("inlineCode",{parentName:"p"},"property")," object along with the raw ",(0,i.kt)("inlineCode",{parentName:"p"},"message"),".\nThe result is that if you had an ",(0,i.kt)("inlineCode",{parentName:"p"},"ErrorSchema")," that looks like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"const errorSchema: ErrorSchema = {\n  __errors: ['error message 1'],\n  password: { __errors: 'passwords do not match' },\n};\n")),(0,i.kt)("p",null,"The returned result from calling ",(0,i.kt)("inlineCode",{parentName:"p"},"toErrorList(errorSchema)")," has changed as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"// version 4 result\n[{ stack: 'root: error message 1' }, { stack: 'password: passwords do not match' }][\n  // version 5 result\n  ({ property: '.', message: 'error message 1', stack: '. error message 1' },\n  {\n    property: '.password',\n    message: 'passwords do not match',\n    stack: '.password passwords do not match',\n  })\n];\n")),(0,i.kt)("h5",{id:"custom-validation-and-extraerrors"},"Custom validation and extraErrors"),(0,i.kt)("p",null,"In previous versions, when using a custom validator on the ",(0,i.kt)("inlineCode",{parentName:"p"},"Form"),", any errors that were generated were inconsistently inserted into the validations ",(0,i.kt)("inlineCode",{parentName:"p"},"errors")," list.\nIn addition, there was an ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/1596"},"issue")," where the non-",(0,i.kt)("inlineCode",{parentName:"p"},"stack")," AJV error information was lost when custom validation generated errors.\nThis issue has been fixed.\nAlso, when ",(0,i.kt)("inlineCode",{parentName:"p"},"extraErrors")," were provided, they were being inconsistently inserted into the ",(0,i.kt)("inlineCode",{parentName:"p"},"errors")," list and the non-",(0,i.kt)("inlineCode",{parentName:"p"},"stack")," AJV error information was lost.\nIn version 5, all of these errors will be consistently appended onto the end of the validation ",(0,i.kt)("inlineCode",{parentName:"p"},"errors")," list, and the additional AJV error information is maintained."),(0,i.kt)("p",null,"In other words, if custom validation or ",(0,i.kt)("inlineCode",{parentName:"p"},"extraErrors")," produced the following ",(0,i.kt)("inlineCode",{parentName:"p"},"ErrorSchema"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},'{\n  __errors: [ "Please correct your password"],\n  password2: { __errors: "passwords do not match" }\n}\n')),(0,i.kt)("p",null,"And the AJV validation produced the following ",(0,i.kt)("inlineCode",{parentName:"p"},"ErrorSchema"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"{\n  __errors: [\n    {\n      message: 'should NOT be shorter than 3 characters',\n      name: 'minLength',\n      params: { limit: 3 },\n      property: '.password2',\n      schemaPath: '#/properties/password2/minLength',\n      stack: '.password2 should NOT be shorter than 3 characters',\n    },\n  ];\n}\n")),(0,i.kt)("p",null,"The resulting ",(0,i.kt)("inlineCode",{parentName:"p"},"errors")," list has changed as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"// version 4\n[\n  { stack: 'root: Please correct your password' },\n  { stack: 'password2: passwords do not match' },\n  { stack: 'password2: should NOT be shorter than 3 characters' },\n][\n  // version 5\n  ({\n    message: 'should NOT be shorter than 3 characters',\n    name: 'minLength',\n    params: { limit: 3 },\n    property: '.password2',\n    schemaPath: '#/properties/password2/minLength',\n    stack: '.password2 should NOT be shorter than 3 characters',\n  },\n  {\n    property: '.',\n    message: 'Please correct your password',\n    stack: '. Please correct your password',\n  },\n  {\n    property: '.',\n    message: 'passwords do not match',\n    stack: '.password2 passwords do not match',\n  })\n];\n")),(0,i.kt)("h4",{id:"generate-correct-ids-when-arrays-are-combined-with-anyofoneof"},"Generate correct ids when arrays are combined with ",(0,i.kt)("inlineCode",{parentName:"h4"},"anyOf"),"/",(0,i.kt)("inlineCode",{parentName:"h4"},"oneOf")),(0,i.kt)("p",null,"In v4, with arrays inside ",(0,i.kt)("inlineCode",{parentName:"p"},"anyOf")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"oneOf"),", the parent name was not used to generate ids.\nFor example, given a schema such as:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "object",\n  "properties": {\n    "items": {\n      "type": "array",\n      "items": {\n        "type": "object",\n        "anyOf": [\n          {\n            "properties": {\n              "foo": {\n                "type": "string"\n              }\n            }\n          },\n          {\n            "properties": {\n              "bar": {\n                "type": "string"\n              }\n            }\n          }\n        ]\n      }\n    }\n  }\n}\n')),(0,i.kt)("p",null,"We would get fields with id ",(0,i.kt)("inlineCode",{parentName:"p"},"root_foo")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"root_bar"),".\nAs you can imagine, we could end up with duplicated ids if there's actually a ",(0,i.kt)("inlineCode",{parentName:"p"},"foo")," or a ",(0,i.kt)("inlineCode",{parentName:"p"},"bar")," in the root of the schema."),(0,i.kt)("p",null,"From v5, the child fields will correctly use the parent id when generating its own id, generating ids such as ",(0,i.kt)("inlineCode",{parentName:"p"},"root_items_0_foo"),"."),(0,i.kt)("h4",{id:"deprecations-added-in-v5"},"Deprecations added in v5"),(0,i.kt)("h5",{id:"getmatchingoption"},"getMatchingOption()"),(0,i.kt)("p",null,"The utility function ",(0,i.kt)("inlineCode",{parentName:"p"},"getMatchingOption()")," was deprecated in favor of the more aptly named ",(0,i.kt)("inlineCode",{parentName:"p"},"getFirstMatchingOption()")," which has the exact same implementation."),(0,i.kt)("h5",{id:"non-standard-enumnames-property"},"Non-standard ",(0,i.kt)("inlineCode",{parentName:"h5"},"enumNames")," property"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"enumNames")," is a non-standard JSON Schema field that was deprecated in version 5.\n",(0,i.kt)("inlineCode",{parentName:"p"},"enumNames")," could be included in the schema to apply labels that differed from an enumeration value.\nThis behavior can still be accomplished with ",(0,i.kt)("inlineCode",{parentName:"p"},"oneOf")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"anyOf")," containing ",(0,i.kt)("inlineCode",{parentName:"p"},"const")," values, so ",(0,i.kt)("inlineCode",{parentName:"p"},"enumNames")," support may be removed from a future major version of RJSF.\nFor more information, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/rjsf-team/react-jsonschema-form/issues/532"},"#532"),"."),(0,i.kt)("h5",{id:"uischemaclassnames"},"uiSchema.classNames"),(0,i.kt)("p",null,"In versions previous to 5, ",(0,i.kt)("inlineCode",{parentName:"p"},"uiSchema.classNames")," was the only property that did not require the ",(0,i.kt)("inlineCode",{parentName:"p"},"ui:")," prefix.\nAdditionally, it did not support being added into the ",(0,i.kt)("inlineCode",{parentName:"p"},"ui:options")," object.\nThis was fixed in version 5 to be consistent with all the other properties in the ",(0,i.kt)("inlineCode",{parentName:"p"},"uiSchema"),", so the ",(0,i.kt)("inlineCode",{parentName:"p"},"uiSchema.classNames")," support may be removed from a future major version of RJSF."),(0,i.kt)("p",null,"If you are using ",(0,i.kt)("inlineCode",{parentName:"p"},"classNames")," as follows, simply add the ",(0,i.kt)("inlineCode",{parentName:"p"},"ui:")," prefix to it to remove the deprecation warning that will be displayed for each ",(0,i.kt)("inlineCode",{parentName:"p"},"uiSchema.classNames")," you have:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import { UiSchema } from '@rjsf/utils';\n\n// This uiSchema will log a deprecation warning to the console\nconst uiSchemaLog: UiSchema = {\n  title: {\n    classNames: 'myClass',\n  },\n};\n// This uiSchema will not\nconst uiSchemaNoLog: UiSchema = {\n  title: {\n    'ui:classNames': 'myClass',\n  },\n};\n")),(0,i.kt)("h3",{id:"rjsfmaterial-ui-breaking-changes"},(0,i.kt)("inlineCode",{parentName:"h3"},"@rjsf/material-ui")," BREAKING CHANGES"),(0,i.kt)("p",null,"This theme was simplified back to working only with Material UI version 4 after an unsuccessful attempt to have it fully support both versions 4 and 5 simultaneously.\nAs a result, the ",(0,i.kt)("inlineCode",{parentName:"p"},"MuiComponentContext"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"MuiForm5"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"Theme5")," components and the ",(0,i.kt)("inlineCode",{parentName:"p"},"useMuiComponent")," hook were removed from the export.\nIn addition, the ",(0,i.kt)("inlineCode",{parentName:"p"},"/v4")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"/v5")," sub-packages were also removed."),(0,i.kt)("h4",{id:"migrating-for-material-ui-version-4"},"Migrating for Material UI version 4"),(0,i.kt)("p",null,"If you were using this theme for Material UI version 4 AND you were using the sub-package, simply remove the ",(0,i.kt)("inlineCode",{parentName:"p"},"/v4")," from your imports."),(0,i.kt)("p",null,"If you modified your Typescript configuration for the ",(0,i.kt)("inlineCode",{parentName:"p"},"/v4")," sub-package, remove the following from your ",(0,i.kt)("inlineCode",{parentName:"p"},"tsconfig.json"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  ...\n  "compilerOptions": {\n    ...\n    "baseUrl": ".",\n    "paths": {\n      "@rjsf/material-ui/*": ["node_modules/@rjsf/material-ui/dist/*"]\n    }\n  }\n}\n')),(0,i.kt)("p",null,"If you modified your Jest configuration for the ",(0,i.kt)("inlineCode",{parentName:"p"},"/v4")," sub-package, remove the following from your ",(0,i.kt)("inlineCode",{parentName:"p"},"jest.config.json"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'  "moduleNameMapper": {\n    "@rjsf/material-ui/v4": "<rootDir>/node_modules/@rjsf/material-ui/dist/v4.js"\n  },\n')),(0,i.kt)("h4",{id:"migrating-for-material-ui-version-5"},"Migrating for Material UI version 5"),(0,i.kt)("p",null,"If you were using this theme for Material UI version 5, you will want to use ",(0,i.kt)("inlineCode",{parentName:"p"},"@rjsf/mui")," instead.\nSee below for some before and after examples."),(0,i.kt)("p",null,"If you modified your Typescript configuration for the ",(0,i.kt)("inlineCode",{parentName:"p"},"/v5")," sub-package, remove the following from your ",(0,i.kt)("inlineCode",{parentName:"p"},"tsconfig.json"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n  ...\n  "compilerOptions": {\n    ...\n    "baseUrl": ".",\n    "paths": {\n      "@rjsf/material-ui/*": ["node_modules/@rjsf/material-ui/dist/*"]\n    }\n  }\n}\n')),(0,i.kt)("p",null,"If you modified your Jest configuration for the ",(0,i.kt)("inlineCode",{parentName:"p"},"/v5")," sub-package, remove the following from your ",(0,i.kt)("inlineCode",{parentName:"p"},"jest.config.json"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'  "moduleNameMapper": {\n    "@rjsf/material-ui/v5": "<rootDir>/node_modules/@rjsf/material-ui/dist/v5.js"\n  },\n')),(0,i.kt)("h5",{id:"before"},"Before"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import Form5 from '@rjsf/material-ui';\n")),(0,i.kt)("p",null,"or"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import Form from '@rjsf/material-ui/v5';\n")),(0,i.kt)("p",null,"or"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import { withTheme } from '@rjsf/core';\nimport { Theme } from '@rjsf/material-ui/v5';\n// Make modifications to the theme with your own fields and widgets\nconst Form = withTheme(Theme);\n")),(0,i.kt)("p",null,"or"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import { withTheme } from '@rjsf/core';\nimport { Theme as Theme5 } from '@rjsf/material-ui';\n// Make modifications to the theme with your own fields and widgets\nconst Form = withTheme(Theme5);\n")),(0,i.kt)("h5",{id:"after"},"After"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import Form from '@rjsf/mui';\n")),(0,i.kt)("p",null,"or"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-tsx"},"import { withTheme } from '@rjsf/core';\nimport { Theme } from '@rjsf/mui';\n// Make modifications to the theme with your own fields and widgets\nconst Form = withTheme(Theme);\n")))}c.isMDXComponent=!0}}]);